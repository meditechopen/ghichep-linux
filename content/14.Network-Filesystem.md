# Network FilesystemSử dụng NFS (Network File System) là một trong những phương pháp được sử dụng để chia sẻ dữ liệu qua các hệ thống vật lý. Nhiều quản trị viên hệ thống gắn các thư mục chính của người dùng từ xa trên một máy chủ để cho phép họ truy cập vào cùng một tệp và tệp cấu hình trên nhiều hệ thống khách hàng. Điều này cho phép người dùng đăng nhập vào các máy khác nhau nhưng vẫn có quyền truy cập vào cùng một tập tin và tài nguyên.Trên một bản phân phối Linux chung, trình nền máy chủ NFS thường bắt đầu bằng lệnh service nfs start. Tệp /etc/exports chứa các thư mục và quyền hạn mà máy chủ sẵn sàng chia sẻ với các hệ thống khác qua NFS. Một mục trong tệp này có thể giống như thế /shared *(rw). Mục nhập này cho phép thư mục /shared được gắn kết bằng cách sử dụng NFS với quyền đọc và viết (rw) và chia sẻ với các máy chủ khác trong cùng một tên miền. Sau khi sửa đổi tệp tin /etc/exports , bạn có thể sử dụng exportfs -av lệnh để thông báo cho Linux về các thư mục bạn đang cho phép được gắn từ xa bằng NFS.Trên client, nếu muốn có hệ thống /etc/fstab tập tin từ xa gắn kết tự động khi khởi động hệ thống, tệp tin được sửa đổi để thực hiện việc này. Ví dụ, một mục trong /etc/fsta tệp b của khách hàng có thể trông giống như <servername>:/shared /mnt/nfs/shared nfs defaults 0 0. Bạn cũng có thể gắn kết hệ thống tập tin từ xa mà không cần khởi động lại hoặc gắn kết một lần bằng cách sử dụng mount lệnh trực tiếp . Nếu /etc/fstab không được sửa đổi, gắn kết từ xa sẽ không có mặt trong lần khởi động lại hệ thống.Trên Redhat phân phối dựa (CentOS-7) NFS server# yum install -y nfs-utils# mkdir /var/sharedThêm vào thư mục /etc/exports# vi /etc/exports# /var/shared 10.10.10.0/24(no_root_squash,no_all_squash,rw,sync)Trong đó - /var/shared Là thư mục chia sẻ- 10.10.10.0/24 Là phạm vi địa chỉ IP của khách hàng- rw Là sự cho phép chia sẻ thư mục- sync Đồng bộ hóa thư mục chia sẻ- root_squash Vô hiệu hóa quyền root- no_root_squash Cho phép đặc quyền gốc- no_all_squash Cho phép thẩm quyền của người dungCác no_root_squash tùy chọn lá người dùng root vào lúc khách hàng NFS để ghi tập tin với người dùng root trên máy chủ NFS. Mặc định là root_squash.```sh# systemctl start rpcbind# systemctl start nfs-server# systemctl enable rpcbind# systemctl enable nfs-server# systemctl status rpcbind# systemctl status nfs-server```Trên client cài đặt thư mục được chia sẻ vào một thư mục cục bộ```sh# mkdir -p /mnt/nfs# mount 10.10.10.97:/var/shared /mnt/nfs# cd /mnt/nfs# touch filename.txt```Để chạy một máy chủ NFS đằng sau tường lửa, bạn nên thực hiện một số thay đổi trên tệp cấu hình NFS, ví dụ như /etc/sysconfig/nfs trên Red Hat / CentOS và sau đó kích hoạt các cổng trên cấu hình tường lửa. Lý do là NFS đòi hỏi dịch vụ rpcbind nó tự động gán các cổng cho các dịch vụ RPC và có thể gây ra các vấn đề về cấu hình các quy tắc tường lửa. Xem: http://initrd.org/wiki/NFS_Setup